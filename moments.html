<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Mystery Moments â™¡</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <style>
        body {
            overflow-y: auto;
            height: auto;
            padding-bottom: 120px;
        }

        /* --- Updated Header --- */
        .intro-section {
            margin-top: 40px;
            margin-bottom: 20px;
        }

        .intro-text {
            font-family: 'Steph', sans-serif;
            font-size: 1.3rem;
            color: #db4e4e;
            background: rgba(255, 255, 255, 0.8);
            padding: 15px 30px;
            border-radius: 25px;
            display: inline-block;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            /* Bolded as requested */
            font-weight: bold; 
        }

        /* --- 3D Striped Mystery Boxes --- */
        .boxes-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 50px;
            margin: 80px auto;
            max-width: 1200px;
            perspective: 1000px;
            min-height: 300px;
            transition: opacity 1s ease, transform 1s ease;
        }

        .box-wrapper {
            position: relative;
            width: 220px;
            height: 220px;
            cursor: pointer;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 4px 15px rgba(0,0,0,0.15));
        }
        
        .box-wrapper:hover {
            transform: translateY(-15px);
            filter: drop-shadow(0 10px 25px rgba(0,0,0,0.25));
        }

        /* Box Body with Stripes */
        .box-body {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 160px;
            background: repeating-linear-gradient(45deg, #ff8da1, #ff8da1 15px, #ffb6c1 15px, #ffb6c1 30px);
            border-radius: 0 0 15px 15px;
            box-shadow: inset 0 -10px 20px rgba(0,0,0,0.15), 5px 15px 35px rgba(0,0,0,0.3), inset 0 2px 5px rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
            border: 3px solid #db4e4e;
            border-top: none;
        }

        /* Box Lid */
        .box-lid {
            position: absolute;
            top: 20px;
            width: 230px;
            height: 45px;
            left: -5px;
            background: linear-gradient(135deg, #ff6b85 0%, #db4e4e 50%, #c43b3b 100%);
            border-radius: 10px;
            z-index: 3;
            transition: transform 0.7s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.7s ease, box-shadow 0.7s ease;
            transform-origin: top;
            box-shadow: 0 8px 20px rgba(0,0,0,0.25), inset 0 1px 3px rgba(255,255,255,0.3);
            border: 2px solid #c43b3b;
        }

        .box-lid::after {
            content: "ðŸŽ€";
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.2rem;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.15));
        }

        /* Improved Revealed Note */
        .box-message {
            position: absolute;
            bottom: 15px;
            left: 5%;
            width: 90%;
            max-height: 350px;
            background-color: #fffef0;
            padding: 20px 15px;
            font-family: 'Indie Flower', cursive;
            font-size: 1.1rem;
            color: #333;
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center; 
            justify-content: center;
            text-align: center;
            opacity: 0;
            transform: translateY(20px) scale(0.8);
            transition: all 0.5s ease;
            z-index: 2;
            overflow-y: auto; /* Scroll if text is too long */
            border-left: 5px solid #db4e4e;
            line-height: 1.6;
        }

        /* Opened Animation */
        .box-wrapper.open .box-lid {
            transform: translateY(-150px) rotateX(70deg) scale(0.8);
            opacity: 0;
            pointer-events: none;
        }

        .box-wrapper.open .box-message {
            opacity: 1;
            transform: translateY(-50px) scale(1.1);
        }

        /* Reshuffle Styling */
        .reshuffle-container {
            margin: 20px 0;
        }

        #reshuffle-btn {
            background: linear-gradient(135deg, #db4e4e 0%, #ff6b85 50%, #ff8da1 100%);
            color: white;
            padding: 14px 35px;
            border-radius: 50px;
            font-family: 'Steph', sans-serif;
            font-size: 1.1rem;
            cursor: pointer;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 15px rgba(219, 78, 78, 0.3), inset 0 1px 3px rgba(255,255,255,0.2);
            transition: all 0.3s;
        }

        #reshuffle-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(219, 78, 78, 0.5), inset 0 1px 3px rgba(255,255,255,0.2);
        }

        #reshuffle-btn:disabled {
            background: linear-gradient(135deg, #ccc 0%, #ddd 50%, #eee 100%);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .counter-text {
            margin-top: 10px;
            font-size: 1.1rem;
            color: #fff;
            font-weight: bold;
            font-family: 'Steph', sans-serif;
            background: rgba(219, 78, 78, 0.85);
            padding: 10px 25px;
            border-radius: 50px;
            display: inline-block;
            box-shadow: 0 4px 10px rgba(219, 78, 78, 0.4);
            backdrop-filter: blur(4px);
        }

        /* Final Message Style */
        .final-message {
            font-family: 'Steph', sans-serif;
            font-size: 1.8rem;
            color: #db4e4e;
            background: rgba(255, 255, 255, 0.8);
            padding: 40px;
            border-radius: 30px;
            max-width: 600px;
            margin: 40px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: fadeIn 1.5s forwards;
        }

        /* Bottom Nav Button */
        .bottom-nav {
            margin-top: 60px;
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }

        .gift-btn {
            background: linear-gradient(135deg, #57915e 0%, #4a7a4d 50%, #3d6341 100%);
            color: white;
            padding: 20px 55px;
            font-size: 1.5rem;
            border-radius: 50px;
            font-family: 'Steph', sans-serif;
            font-weight: bold;
            box-shadow: 0 8px 25px rgba(87, 145, 94, 0.4), inset 0 1px 3px rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .gift-btn:hover { 
            transform: scale(1.08);
            box-shadow: 0 12px 35px rgba(87, 145, 94, 0.6), inset 0 1px 3px rgba(255,255,255,0.2);
        }

        .gift-btn:active {
            transform: scale(0.98);
        }

        @keyframes boxFadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-50px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @media (max-width: 850px) {
            .boxes-container { flex-direction: column; gap: 110px; }
            .box-wrapper.open .box-message { transform: translateY(-60px) scale(1); }
        }
    </style>
</head>
<body>

    <div class="intro-section">
        <div class="intro-text">
            Some of our best moments are inside these boxes, Open them to see whats inside â™¡
        </div>
    </div>

    <div class="boxes-container" id="boxes-grid">
        </div>

    <div class="reshuffle-container">
        <button id="reshuffle-btn" onclick="handleReshuffle()">Reshuffle Boxes â†»</button>
        <div class="counter-text" id="counter">Reshuffles left: 5</div>
    </div>

    <div class="bottom-nav">
        <button class="gift-btn" onclick="window.location.href='coupons.html'">
            I have a small gift for you ðŸ˜‰
        </button>
    </div>

    <script>
        const memories = [
            "The moment you admitted youâ€™re singleâ€¦ but not really, because you were already emotionally my girlfriend, and also waiting for me to finish this project but you didn't know that at the time",
            "Abang = brother Kakak = sister Adik = younger than abang and kakak, Fitryna = my sayang ðŸ’œ Not sure if you remember this moment or not LOL",
            "You, and your healthy obsession with my biceps.",
            "You told me how you feel about your body, how youâ€™re insecure about certain things, and I could feel your trust in me growing. It made me want to hold you even closer.",
            "You opened up about how your family views foreign relationships, and how they would want you to marry someone local. It made me realize just how hard this would be for both of us.",
            "When you said that bangladeshi men are dangerous and may have a wife back in bangladesh, as if i would have another wife but you ðŸ˜‚ðŸ˜‚ðŸ˜‚",
            "I told you that I wouldnâ€™t let family drama be the reason we couldnâ€™t try. Weâ€™d cross that bridge together. It felt like a promise to always fight for us.",
            "Hearing you say that you were waiting (multiple times actually) for me, it wasnâ€™t just casual. It felt like you were emotionally investing in this, in us. Basically giving me the green signal to ask you out",
            "When you told me about your struggles with English, you didn't like speaking it, but you wished you could so that you could talk to me every second. That- I wanted to ask you to be mine at that exact second, it took a lot of restraint. I am sorry for making you wait.",
            "That moment when you said you were afraid things wouldnâ€™t work because of our families, I wanted to hold you tight. I wanted you to know we could face it together.",
            "You opened up about your fear of not being good enough, not pretty enough, not slim enough and I reassured you that I was already here, already choosing you, only because its you.",
            "You asking for post workout pictures of me, because you want to see me all sweaty and naked (You pervert! I love it tho)"
        ];

        let reshufflesLeft = 5;

        function handleReshuffle() {
            if (reshufflesLeft <= 0) return;

            reshufflesLeft--;
            document.getElementById('counter').innerText = `Reshuffles left: ${reshufflesLeft}`;
            
            const grid = document.getElementById('boxes-grid');

            if (reshufflesLeft === 0) {
                document.getElementById('reshuffle-btn').disabled = true;
                // Start Fade Out Animation
                grid.style.animation = "boxFadeOut 1s forwards";
                setTimeout(() => {
                    grid.innerHTML = '<div class="final-message">That is all the moments i could think off for now, Do not worry, we will be making more</div>';
                    grid.style.animation = "fadeIn 1s forwards";
                }, 1000);
                return;
            }

            reshuffleContent();
        }

        function reshuffleContent() {
            const grid = document.getElementById('boxes-grid');
            grid.innerHTML = ''; 

            const shuffled = [...memories].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 3);

            selected.forEach((memory, i) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'box-wrapper';
                wrapper.onclick = () => wrapper.classList.toggle('open');
                
                // Varied stripe colors for fun
                const colors = ['#db4e4e', '#57915e', '#ff8da1'];
                
                wrapper.innerHTML = `
                    <div class="box-lid"></div>
                    <div class="box-message">${memory}</div>
                    <div class="box-body">
                        <span style="font-size: 3rem; color: white; text-shadow: 2px 2px 5px rgba(0,0,0,0.3);">?</span>
                    </div>
                `;
                grid.appendChild(wrapper);
            });
        }

        // Initial Load
        reshuffleContent();
    </script>

</body>
</html>